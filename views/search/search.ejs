<form class="container" id="search" method="get">
  <div class="input-group mb-3 search-section row justify-content-center">
    <label for="job_title" class="search-label">Job Title</label>

    <% if(typeof job_title === undefined ){ %>
    <input id="job_title" name="job_title" type="text" class="form-control rounded search-field"
      placeholder="e.g. Senior Android Developer" aria-label="Username" aria-describedby="basic-addon1" value="">
    <% }else { %>
      <input id="job_title" name="job_title" type="text" class="form-control rounded search-field"
      placeholder="e.g. Senior Android Developer" aria-label="Username" aria-describedby="basic-addon1" value="<%=job_title %>">
    <% } %>
      
      <div class="dropdown search-dropdown ml-4">
        <select class="custom-select" id="inputGroupSelect01" name="results">
          <% if (size == undefined) { %>
          <option selected value="10">10 results</option>
          <option value="20">20 results</option>
          <option value="30">30 results</option>
          <option value="10000">All results</option>
          <% } else {
          var options = [ "10", "20", "30", "All" ];
          for ( var i = 0; i < options.length; i++ )
          {
              var selected = (size == options[i] || options[i] === "All") ? "selected" : "";
              %>
           
            <option value="<%=options[i] %>" <%=selected %>><%=options[i] %> results</option>
            
          <% }} %>
        </select>
      </div>
      
    <div class="dropdown search-dropdown ml-4">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        Job type
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <% if(job_type === undefined ){ %>
        <div class="form-check">
          <input class="form-check-input" name="job_type" type="checkbox" value="Permanent">
          <label class="form-check-label">
            Full-time
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" name="job_type" type="checkbox" value="Internship">
          <label class="form-check-label">
            Internship
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" name="job_type" type="checkbox" value="Working-Student">
          <label class="form-check-label">
            Working student
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" name="job_type" type="checkbox" value="Flexible">
          <label class="form-check-label">
            Flexible
          </label>
        </div>
        <% } else {
          let types = ["Permanent", "Internship", "Working-Student", "Flexible"];
          for(let i = 0; i < types.length; i++){
            let option = "" + types[i];
            if(job_type.includes.option){%>
              <div class="form-check">
                <input class="form-check-input" name="job_type" type="checkbox" value="<%=types[i] %>" checked>
                <label class="form-check-label">
                  <%=types[i] %>
                </label>
              </div>
            <% } else {%>
              <div class="form-check">
                <input class="form-check-input" name="job_type" type="checkbox" value="<%=types[i] %>">
                <label class="form-check-label">
                  <%=types[i] %>
                </label>
              </div>
            <%}%>
          <%}%>
        <%}%>
      </div>
    </div>

    <div class="btn btn-secondary ml-4">
      <div class="form-check">
        <input class="form-check-input" name="remote" type="checkbox" value="remote" id="remote">
        <label class="form-check-label" for="remote">
          Remote
        </label>
      </div>
    </div>
    
    <button class="btn btn-primary ml-4" type="submit" id="search-addon">
      <i class="fas fa-search"></i>
      <span>Search</span>
    </button>
  </div>
</form>

<div>
  <% if(typeof matches !== 'undefined' && matches.length > 0) { %>
    <%- include ('../matches/index.ejs', {matches: matches}) %> 
  <% } else if (typeof matches !== 'undefined' && matches.length === 0){ %>
    <div class="alert alert-secondary" role="alert">
      No results yet. Please try something else!
    </div>
  <% } else{ %>
    <div class="alert alert-info" role="alert">
      Here you can search for other jobs
    </div>
  <% } %>
</div>